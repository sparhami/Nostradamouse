<link rel="import" href="../../bower_components/lazy-autosuggest/lazy-autosuggest.html">

<polymer-element name="x-stateautosuggest" extends="lazy-autosuggest" >
    <script type="application/javascript">
        (function() {
            // No use strict because Polymer's super function won't work
            // 'use strict';

            var items = [
                'Montgomery', 'Alabama',
                'Juneau', 'Alaska',
                'Phoenix', 'Arizona',
                'Little Rock', 'Arkansas',
                'Sacramento', 'California',
                'Denver', 'Colorado',
                'Hartford', 'Connecticut',
                'Dover', 'Delaware',
                'Tallahassee', 'Florida',
                'Atlanta', 'Georgia',
                'Honolulu', 'Hawaii',
                'Boise', 'Idaho',
                'Springfield', 'Illinois',
                'Indianapolis', 'Indiana',
                'Des Moines', 'Iowa',
                'Topeka', 'Kansas',
                'Frankfort', 'Kentucky',
                'Baton Rouge', 'Louisiana',
                'Augusta', 'Maine',
                'Annapolis', 'Maryland',
                'Boston', 'Massachusetts',
                'Lansing', 'Michigan',
                'Saint Paul', 'Minnesota',
                'Jackson', 'Mississippi',
                'Jefferson City', 'Missouri',
                'Helena', 'Montana',
                'Lincoln', 'Nebraska',
                'Carson City', 'Nevada',
                'Concord', 'New Hampshire',
                'Trenton', 'New Jersey',
                'Santa Fe', 'New Mexico',
                'Albany', 'New York',
                'Raleigh', 'North Carolina',
                'Bismarck', 'North Dakota',
                'Columbus', 'Ohio',
                'Oklahoma City', 'Oklahoma',
                'Salem', 'Oregon',
                'Harrisburg', 'Pennsylvania',
                'Providence', 'Rhode Island',
                'Columbia', 'South Carolina',
                'Pierre', 'South Dakota',
                'Nashville', 'Tennessee',
                'Austin', 'Texas',
                'Salt Lake City', 'Utah',
                'Montpelier', 'Vermont',
                'Richmond', 'Virginia',
                'Olympia', 'Washington',
                'Charleston', 'West Virginia',
                'Madison', 'Wisconsin',
                'Cheyenne', 'Wyoming'
            ];

            Polymer('x-stateautosuggest', {
                domReady: function() {
                    this.super();
                    this.addEventListener('inputChange', this.updateSuggestions);
                },

                updateSuggestions: function(e) {
                    var lowercaseValue = e.detail.value.toLowerCase();

                    // simulate some delay for getting suggestions 
                    window.setTimeout(function() {
                        this.items = items
                            .filter(function(item) {
                                return item.toLowerCase().indexOf(lowercaseValue) === 0;
                            })
                            .slice(0, 5);
                    }.bind(this), 100);
                }
            });
        })();
    </script>
</polymer-element>
